<html lang="en">
  <body>
    <div id="app"></div>
    <script src="./reactivity/index.js"></script>
    <script src="./runtime/h.js"></script>
    <script src="./runtime/renderer.js"></script>
    <script>
 const Vue={
    createApp(config){
        return {
            mount:function(container){
            
                let setupResult= config.setup();
                let render=config.render(setupResult);
                let el= document.querySelector(container);
                let isMounted=false;
                let prevVdom;
                watchEffect(()=>{
                    if(!isMounted){
                        prevVdom=config.render(setupResult);
                        mountElement(prevVdom,el);
                        isMounted=true;
                    }else{
                        const newVdom=config.render(setupResult);
                        diff(prevVdom,newVdom);
                        prevVdom=newVdom;
                    }
                });

            }
        }
    }
}
      // 定义响应函数
      let effective;
      const App={
    render(content) {
          return h("div", null, [
            h("div", null, String(content.state.message)),
            h(
              "button",
              {
                onClick: content.click,
              },
              "click"
            ),
          ]);
        },
    
    setup() {
          const state = reactive({
            message: "Hello Vue 3!!",
          });

          const click = () => {
            state.message = state.message.split("").reverse().join("");
          };
          return { state, click };
        },


}
      const { createApp } = Vue;
      createApp(App).mount("#app");
    </script>
  </body>
</html>
